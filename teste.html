<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<div id="score-panel" style="width: 300px; margin: 20px;">
  <h2>Pontuação</h2>
  <canvas id="pointsChart"></canvas>
  <p id="scoreText">Você tem 0 pontos. Faltam 10 para subir de nível!</p>

  <button onclick="addPoints(1)">Concluiu vídeo (+1)</button>
  <button onclick="addPoints(2)">Fez resumo (+2)</button>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  let currentPoints = 0;
  let level = 1;
  let levelThreshold = 10;

  const ctx = document.getElementById('pointsChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Pontos', 'Faltam'],
      datasets: [{
        data: [0, levelThreshold],
        backgroundColor: ['#00c853', '#eeeeee'],
        borderWidth: 1
      }]
    },
    options: {
      cutout: '70%',
      plugins: {
        tooltip: { enabled: false },
        legend: { display: false }
      }
    }
  });

  function addPoints(p) {
    currentPoints += p;
    if (currentPoints >= levelThreshold) {
      level++;
      currentPoints = currentPoints - levelThreshold;
      levelThreshold += 5; // pode ajustar o quanto cresce a dificuldade
      alert(`🎉 Parabéns! Você subiu para o nível ${level}`);
    }
    updateChart();
  }

  function updateChart() {
    chart.data.datasets[0].data = [currentPoints, levelThreshold - currentPoints];
    chart.update();

    document.getElementById('scoreText').textContent =
      `Você tem ${currentPoints} pontos. Faltam ${levelThreshold - currentPoints} para subir ao nível ${level + 1}`;
  }
</script>

</body>
</html>